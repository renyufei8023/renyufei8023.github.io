<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <title>MySql一些语句</title>
  <meta name="description" content="MYSql###1.查询所有数据库show databases使用这个命令可以查看所有的数据库###2.创建数据库create database renyufei创建数据库如果不指定编码的话默认编码就是utf8不过我们可以使用character set utf8我们可以查看默认编码show create data...">
  <meta name="author" content="Wei Wang">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="MySql一些语句">
  <meta name="twitter:description" content="MYSql###1.查询所有数据库show databases使用这个命令可以查看所有的数据库###2.创建数据库create database renyufei创建数据库如果不指定编码的话默认编码就是utf8不过我们可以使用character set utf8我们可以查看默认编码show create data...">

  <meta property="og:type" content="article">
  <meta property="og:title" content="MySql一些语句">
  <meta property="og:description" content="MYSql###1.查询所有数据库show databases使用这个命令可以查看所有的数据库###2.创建数据库create database renyufei创建数据库如果不指定编码的话默认编码就是utf8不过我们可以使用character set utf8我们可以查看默认编码show create data...">

  <link rel="icon" type="image/ico" href="/assets/images/favicon.ico" />
  <link href="/assets/images/favicon.ico" rel="shortcut icon" type="image/ico">

  <link rel="stylesheet" href="/css/main.css">
  <link href="//netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">

  <link rel="canonical" href="http://vno.onevcat.com/2017/01/MySql%E4%B8%80%E4%BA%9B%E8%AF%AD%E5%8F%A5/">
  <link rel="alternate" type="application/rss+xml" title="上善若水，人淡如菊" href="http://vno.onevcat.com/feed.xml">

  <meta name="google-site-verification" content="1-1ZlHoRvM0T2FqPbW2S-qLgYXN6rsn52kErlMPd_gw" />

</head>


  <body>



    <span class="mobile btn-mobile-menu">
        <i class="fa fa-list btn-mobile-menu__icon"></i>
        <i class="fa fa-angle-up btn-mobile-close__icon hidden"></i>
    </span>
    

    <header class="panel-cover panel-cover--collapsed" style="background-image: url('/assets/images/background-cover.jpg')">
  <div class="panel-main">

    <div class="panel-main__inner panel-inverted">
    <div class="panel-main__content">

        <a href="/#blog" title="前往 上善若水，人淡如菊 的主页" class="blog-button"><img src="/assets/images/avatar.jpg" width="80" alt="上善若水，人淡如菊 logo" class="panel-cover__logo logo" /></a>
        <h1 class="panel-cover__title panel-title"><a href="/#blog" title="link to homepage for 上善若水，人淡如菊" class="blog-button">上善若水，人淡如菊</a></h1>
        
        <span class="panel-cover__subtitle panel-subtitle">上善若水，人淡如菊</span>
        
        <hr class="panel-cover__divider" />
        <p class="panel-cover__description">嗨，我是任玉飞 (@Raphcel)，一名走在iOS开发路上的从业者，努力成为一个全栈工程师，爱好唱歌，以及所有与音乐有关的事情。目前在北京工作。吾笃信：认真你就赢了。</p>
        <hr class="panel-cover__divider panel-cover__divider--secondary" />
        
        
        
        <div class="navigation-wrapper">
          <div>
            <nav class="cover-navigation cover-navigation--primary">
              <ul class="navigation">
                <li class="navigation__item"><a href="/#blog" title="Visit blog" class="blog-button">博客</a></li>
                
                  <li class="navigation__item"><a href="http://about.yufei.ren" target="_blank" title="关于">关于</a></li>
                
              </ul>
            </nav>
          </div>
          
          <div><nav class="cover-navigation navigation--social">
  <ul class="navigation">

    
    <!-- jianshu-->
    <li class="navigation__item">
      <a href="http://www.jianshu.com/users/d8f57dd98c59/latest_articles" title="@ 的简书" target="_blank">
        <i class='social fa fa-book'></i>
        <span class="label">jianshu</span>
      </a>
    </li>
    

  
  <!-- Weibo -->
  <li class="navigation__item">
    <a href="http://weibo.com/ryf8023" title="@ 的微博" target="_blank">
      <i class='social fa fa-weibo'></i>
      <span class="label">Weibo</span>
    </a>
  </li>
  

  
  <!-- Github -->
  <li class="navigation__item">
    <a href="https://github.com/renyufei8023" title="@ 的 Github" target="_blank">
      <i class='social fa fa-github'></i>
      <span class="label">Github</span>
    </a>
  </li>
  

  

  

  <!-- RSS -->
  <li class="navigation__item">
    <a href="/feed.xml" rel="author" title="RSS" target="_blank">
      <i class='social fa fa-rss'></i>
      <span class="label">RSS</span>
    </a>
  </li>

  
  <!-- Email -->
  <li class="navigation__item">
    <a href="mailto:renyufei8023@gamil.com" title="Contact me">
      <i class='social fa fa-envelope'></i>
      <span class="label">Email</span>
    </a>
  </li>
  

  </ul>
</nav>
</div>
        </div>
      </div>
    </div>
    
    
    <div class="panel-cover--overlay cover-black"></div>
    
  </div>
</header>

    <div class="content-wrapper">
        <div class="content-wrapper__inner">
            <article class="post-container post-container--single" itemscope itemtype="http://schema.org/BlogPosting">
  <header class="post-header">
    <div class="post-meta">
      <time datetime="2017-01-11 12:16:32 +0800" itemprop="datePublished" class="post-meta__date date">2017-01-11</time> &#8226; <span class="post-meta__tags tags">Blog</span>
    </div>
    <h1 class="post-title">MySql一些语句</h1>
  </header>

  <section class="post">
    <h1 id="mysql">MYSql</h1>
<p>###1.查询所有数据库
<code class="highlighter-rouge">show databases</code>使用这个命令可以查看所有的数据库<br />
###2.创建数据库
<code class="highlighter-rouge">create database renyufei</code>创建数据库
如果不指定编码的话默认编码就是utf8
不过我们可以使用<code class="highlighter-rouge">character set utf8</code>
我们可以查看默认编码<code class="highlighter-rouge">show create database renyufei</code>
###3.删除数据库
<code class="highlighter-rouge">drop database renyufe</code>
###4.修改数据库
<code class="highlighter-rouge">alter database renyufei default character set gbk</code>
###5.查看所有表
<code class="highlighter-rouge">show tables</code></p>

<p>###6.创建表
<code class="highlighter-rouge">create table student(id int,name varchar(20))</code>
###7.查看表结构
<code class="highlighter-rouge">desc student</code>
###8.删除表
<code class="highlighter-rouge">drop table student</code>
###9.修改表
####9.1添加字段
<code class="highlighter-rouge">alter table student add column age int</code>
####9.2删除字段
<code class="highlighter-rouge">alter table student drop column age</code>
####9.3修改字段类型
<code class="highlighter-rouge">alter table 表名 modify column 字段名 类型;</code></p>

<p>####9.4修改字段名称
<code class="highlighter-rouge">alter table student change column 原来字段名 修改后字段名 类型</code>
####9.5修改表名称
<code class="highlighter-rouge">alter table student rename to teacher</code>
###10增删改数据</p>

<pre><code class="language-mysql">-- ********一、增删改数据********* ---
-- 1.1 增加数据
-- 插入所有字段。一定依次按顺序插入
INSERT INTO student VALUES(1,'张三','男',20);
-- 注意不能少或多字段值
-- INSERT INTO student VALUES(2,'李四','女');
-- 插入部分字段
INSERT INTO student(id,NAME) VALUES(2,'李四');

-- 1.2 修改数据
-- 修改所有数据（建议少用）
UPDATE student SET gender='女';
-- 带条件的修改（推荐使用）
UPDATE student SET gender='男' WHERE id=1; -- 修改id为1的学生，修改性别为男
-- 修改多个字段,注意: SET 字段名=值,字段名=值,....
UPDATE student SET gender='男',age=30 WHERE id=2;

-- 1.3 删除数据
-- 删除所有数据（建议少用）
DELETE FROM student;
-- 带条件的删除(推荐使用)
DELETE FROM student WHERE id=2;
--  另一种方式
-- delete from: 可以全表删除      1)可以带条件删除  2）只能删除表的数据，不能删除表的约束     3)使用delete from删除的数据可以回滚（事务）
-- truncate table: 可以全表删除   1）不能带条件删除 2）即可以删除表的数据，也可以删除表的约束 3）使用truncate table删除的数据不能回滚
TRUNCATE TABLE student;


CREATE TABLE test(
	id INT PRIMARY KEY AUTO_INCREMENT, -- 自增长约束
	NAME VARCHAR(20)
)
DESC test;

-- 1.
DELETE FROM test;
-- 2
TRUNCATE TABLE test;

INSERT INTO test(NAME) VALUES('张三');
INSERT INTO test(NAME) VALUES('张三2');
INSERT INTO test(NAME) VALUES('张三3');
</code></pre>

<p>###11.查询数据
```mysql
– 2.1 查询所有列
SELECT * FROM student;</p>

<p>– 2.2 查询指定列
SELECT id,NAME,gender FROM student;</p>

<p>– 2.3 查询时指定别名（as）
– 注意： 在多表查询是经常使用表的别名
SELECT id AS ‘编号’,NAME AS ‘姓名’ FROM student;</p>

<p>– 2.4 查询时添加常量列
– 需求： 在查询student表时添加一个班级列，内容为“java就业班”
SELECT id,NAME,gender,age,’java就业班’ AS ‘年级’  FROM student;</p>

<p>– 2.5 查询时合并列
– 需求： 查询每个学生的servlet和jsp的总成绩
SELECT id,NAME,(servlet+jsp) AS ‘总成绩’ FROM student;
– 注意：合并列只能合并数值类型的字段al
SELECT id,(NAME+servlet) FROM student;</p>

<p>– 2.6 查询时去除重复记录(DISTINCT)
– 需求： 查询学生的性别     男 女
SELECT DISTINCT gender FROM student;
– 另一种语法
SELECT DISTINCT(gender) FROM student;
– 需求: 查询学生所在的地区
SELECT DISTINCT address FROM student;</p>

<p>– 2.7 条件查询(where)
– 2.7.1 逻辑条件： and(与)     or(或)
– 需求： 查询id为2，且姓名为李四的学生
SELECT * FROM student WHERE id=2 AND NAME=’李四’; – 交集</p>

<p>– 需求： 查询id为2，或姓名为张三的学生
SELECT * FROM student WHERE id=2 OR NAME=’张三’; – 并集</p>

<p>– 2.7.2 比较条件： &gt;   &lt;   &gt;=  &lt;=  =  &lt;&gt;(不等于)     between and (等价于&gt;= 且 &lt;=)
– 需求： 查询servlet成绩大于70分的学生
SELECT * FROM student WHERE servlet&gt;70;</p>

<p>– 需求： 查询jsp成绩大于等于75，且小于等于90分的学生
SELECT * FROM student WHERE jsp&gt;=75 AND jsp&lt;=90;
– 另一个语法
SELECT * FROM student WHERE jsp BETWEEN 75 AND 90; – (包前包后)</p>

<p>SELECT * FROM student WHERE gender&lt;&gt;’男’;
<code class="highlighter-rouge">
####条件查询
</code>mysql
– 2.7 条件查询(where)
– 2.7.1 逻辑条件： and(与)     or(或)
– 需求： 查询id为2，且姓名为李四的学生
SELECT * FROM student WHERE id=2 AND NAME=’李四’; – 交集</p>

<p>– 需求： 查询id为2，或姓名为张三的学生
SELECT * FROM student WHERE id=2 OR NAME=’张三’; – 并集</p>

<p>– 2.7.2 比较条件： &gt;   &lt;   &gt;=  &lt;=  =  &lt;&gt;(不等于)     between and (等价于&gt;= 且 &lt;=)
– 需求： 查询servlet成绩大于70分的学生
SELECT * FROM student WHERE servlet&gt;70;</p>

<p>– 需求： 查询jsp成绩大于等于75，且小于等于90分的学生
SELECT * FROM student WHERE jsp&gt;=75 AND jsp&lt;=90;
– 另一个语法
SELECT * FROM student WHERE jsp BETWEEN 75 AND 90; – (包前包后)</p>

<p>SELECT * FROM student WHERE gender&lt;&gt;’男’;</p>

<p>– 2.7.3 判空条件(null 空字符串)：  is null / is not null / =’’  / &lt;&gt;’’
– 需求： 查询地址为空的学生（包括null和空字符串）
– null vs  空字符串
– null：表示没有值
– 空字符串：有值的！
– 判断null
SELECT * FROM student WHERE address IS NULL ;
– 判断空字符串
SELECT * FROM student WHERE address=’’;</p>

<p>SELECT * FROM student WHERE address IS NULL OR address=’’; – （包括null和空字符串）</p>

<p>– 需求： 查询有地址的学生(不包括null和空字符串)
SELECT * FROM student WHERE address IS NOT NULL AND address&lt;&gt;’’;
<code class="highlighter-rouge">
####模糊查询
</code>mysql
– 通常使用以下替换标记：
– % : 表示任意个字符
– _ : 表示一个字符
– 需求： 查询姓‘张’的学生
SELECT * FROM student WHERE NAME LIKE ‘李%’;</p>

<p>– 需求： 查询姓‘李’，且姓名只有两个字的学生
SELECT * FROM student WHERE NAME LIKE ‘李_’;
<code class="highlighter-rouge">
####聚合查询
</code>mysql
 – 常用的聚合函数： sum()  avg()  max()  min()  count()
– 需求：查询学生的servlet的总成绩 (sum() :求和函数)
SELECT SUM(servlet) AS ‘servlet的总成绩’ FROM student;</p>

<p>– 需求： 查询学生的servlet的平均分
SELECT AVG(servlet) AS ‘servlet的平均分’ FROM student;</p>

<p>– 需求: 查询当前servlet最高分
SELECT MAX(servlet) AS ‘最高分’ FROM student;</p>

<p>– 需求： 查询最低分
SELECT MIN(servlet) AS ‘最低分’ FROM student;</p>

<p>– 需求： 统计当前有多少学生(count(字段))
SELECT COUNT(*) FROM student;</p>

<p>SELECT COUNT(id) FROM student;</p>

<p>– 注意：count（）函数统计的数量不包含null的数据
– 使用count统计表的记录数，要使用不包含null值的字段
SELECT COUNT(age) FROM student;</p>

<p>SELECT * FROM student;
```</p>

<p>####分页查询
```mysql
– 2.9 分页查询（limit 起始行,查询几行）
– 起始行从0开始
– 分页：当前页  每页显示多少条
– 分页查询当前页的数据的sql: SELECT * FROM student LIMIT (当前页-1)*每页显示多少条,每页显示多少条;</p>

<p>– 需求： 查询第1,2条记录（第1页的数据）
SELECT * FROM student LIMIT 0,2;
– 查询第3,4条记录（第2页的数据）
SELECT * FROM student LIMIT 2,2;
– 查询第5,6条记录（第3页的数据）
SELECT * FROM student LIMIT 4,2;
– 查询第7,8条记录 (没有记录不显示)
SELECT * FROM student LIMIT 6,2;
```</p>

<p>####查询排序
```mysql
– 语法 ：order by 字段 asc/desc
– asc: 顺序，正序。数值：递增，字母：自然顺序（a-z）
– desc: 倒序，反序。数值：递减，字母：自然反序(z-a)</p>

<p>– 默认情况下，按照插入记录顺序排序
SELECT * FROM student;</p>

<p>– 需求： 按照id顺序排序
SELECT * FROM student ORDER BY id ASC;
SELECT * FROM student ORDER BY id; – 默认正序</p>

<p>SELECT * FROM student ORDER BY id DESC;– 反序</p>

<p>– 注意：多个排序条件
– 需求： 按照servlet正序，按照jsp的倒序
SELECT * FROM student ORDER BY servlet ASC,jsp DESC;
<code class="highlighter-rouge">
####分组查询
</code>mysql
– 需求： 查询男女的人数
– 预期结果：
  –  男   3
  — 女   2
  – 1) 把学生按照性别分组(GROUP BY gender)
  – 2) 统计每组的人数(COUNT(<em>))
SELECT gender,COUNT(</em>) FROM student GROUP BY gender;</p>

<p>– 2.12 分组查询后筛选
– 需求： 查询总人数大于2的性别
– 1) 查询男女的人数
– 2）筛选出人数大于2的记录(having)
— 注意： 分组之前条件使用where关键字，分组之前条件使用having关键字
SELECT gender,COUNT(<em>) FROM student WHERE GROUP BY gender HAVING COUNT(</em>)&gt;2;
```</p>

<p>###数据库约束
```mysql
– 1.1 默认值
CREATE TABLE student(
	id INT,
	NAME VARCHAR(20),
	address VARCHAR(20) DEFAULT ‘广州天河’  – 默认值
)</p>

<p>DROP TABLE student;
– 当字段没有插入值的时候，mysql自动给该字段分配默认值
INSERT INTO student(id,NAME) VALUES(1,’张三’);</p>

<p>– 注意：默认值的字段允许为null
INSERT INTO student(id,NAME,address) VALUE(2,’李四’,NULL);
INSERT INTO student(id,NAME,address) VALUE(3,’王五’,’广州番禺’);</p>

<p>SELECT * FROM student;</p>

<p>– 1.2 非空
– 需求： gender字段必须有值（不为null）
CREATE TABLE student(
	id INT,
	NAME VARCHAR(20),
	gender VARCHAR(2) NOT NULL – 非空
)</p>

<p>– 非空字段必须赋值
INSERT INTO student(id,NAME) VALUES(1,’李四’);
– 非空字符不能插入null
INSERT INTO student(id,NAME,gender) VALUES(1,’李四’,NULL);</p>

<p>SELECT * FROM student;</p>

<p>– 1.3 唯一
CREATE TABLE student(
	id INT UNIQUE, – 唯一
	NAME VARCHAR(20)
)</p>

<p>INSERT INTO student(id,NAME) VALUES(1,’zs’);
INSERT INTO student(id,NAME) VALUES(1,’lisi’); – ERROR 1062 (23000): Duplicate entry ‘1’ for key ‘id’</p>

<p>INSERT INTO student(id,NAME) VALUES(2,’lisi’);</p>

<p>SELECT * FROM student;</p>

<p>– 1.4 主键（非空+唯一）
DROP TABLE student;</p>

<p>CREATE TABLE student(
	id INT PRIMARY KEY, – 主键
	NAME VARCHAR(20)
)</p>

<p>INSERT INTO student(id,NAME) VALUES(1,’张三’);
INSERT INTO student(id,NAME) VALUES(2,’张三’);</p>

<p>– INSERT INTO student(id,NAME) VALUES(1,’李四’); – 违反唯一约束： Duplicate entry ‘1’ for key ‘PRIMARY’</p>

<p>– insert into student(name) value(‘李四’); – 违反非空约束： ERROR 1048 (23000): Column ‘id’ cannot be null</p>

<p>– 1.5 自增长
CREATE TABLE student(
	id INT(4) ZEROFILL PRIMARY KEY AUTO_INCREMENT, – 自增长，从0开始  ZEROFILL 零填充
	NAME VARCHAR(20)
)</p>

<p>– 自增长字段可以不赋值，自动递增
INSERT INTO student(NAME) VALUES(‘张三’);
INSERT INTO student(NAME) VALUES(‘李四’);
INSERT INTO student(NAME) VALUES(‘王五’);</p>

<p>SELECT * FROM student;
– 不能影响自增长约束
DELETE FROM student;
– 可以影响自增长约束
TRUNCATE TABLE student;</p>

<p>– 1.6 外键约束
– 员工表
CREATE TABLE employee(
	id INT PRIMARY KEY,
	empName VARCHAR(20),
	deptName VARCHAR(20) – 部门名称
)</p>

<p>INSERT INTO employee VALUES(1,’张三’,’软件开发部’);
INSERT INTO employee VALUES(2,’李四’,’软件开发部’);
INSERT INTO employee VALUES(3,’王五’,’应用维护部’);</p>

<p>SELECT * FROM employee;</p>

<p>– 添加员工，部门名称的数据冗余高
INSERT INTO employee VALUES(4,’陈六’,’软件开发部’);</p>

<p>– 解决数据冗余高的问题：给冗余的字段放到一张独立表中
– 独立设计一张部门表
CREATE TABLE dept(
	id INT PRIMARY KEY,
	deptName VARCHAR(20)
)</p>

<p>DROP TABLE employee;</p>

<p>– 修改员工表
CREATE TABLE employee(
	id INT PRIMARY KEY,
	empName VARCHAR(20),
	deptId INT,– 把部门名称改为部门ID
	– 声明一个外键约束
	CONSTRAINT emlyee_dept_fk FOREIGN KEY(deptId) REFERENCES dept(id) ON UPDATE CASCADE ON DELETE CASCADE  – ON CASCADE UPDATE ：级联修改
	–           外键名称                  外键               参考表(参考字段)
)</p>

<p>INSERT INTO dept(id,deptName) VALUES(1,’软件开发部’);
INSERT INTO dept(id,deptName) VALUES(2,’应用维护部’);
INSERT INTO dept(id,deptName) VALUES(3,’秘书部’);</p>

<p>INSERT INTO employee VALUES(1,’张三’,1);
INSERT INTO employee VALUES(2,’李四’,1);
INSERT INTO employee VALUES(3,’王五’,2);
INSERT INTO employee VALUES(4,’陈六’,3);</p>

<p>– 问题: 该记录业务上不合法，员工插入了一个不存在的部门数据
INSERT INTO employee VALUES(5,’陈六’,4); – 违反外键约束： Cannot add or update a child row: a foreign key constraint fails (<code class="highlighter-rouge">day16</code>.<code class="highlighter-rouge">employee</code>, CONSTRAINT <code class="highlighter-rouge">emlyee_dept_fk</code> FOREIGN KEY (<code class="highlighter-rouge">deptId</code>) REFERENCES <code class="highlighter-rouge">dept</code> (<code class="highlighter-rouge">id</code>))</p>

<p>– 1）当有了外键约束，添加数据的顺序： 先添加主表，再添加副表数据
– 2）当有了外键约束，修改数据的顺序： 先修改副表，再修改主表数据
– 3）当有了外键约束，删除数据的顺序： 先删除副表，再删除主表数据
– 修改部门(不能直接修改主表)
UPDATE dept SET id=4 WHERE id=3;
– 先修改员工表
UPDATE employee SET deptId=2 WHERE id=4;</p>

<p>– 删除部门
DELETE FROM dept WHERE id=2;</p>

<p>– 先删除员工表
DELETE FROM employee WHERE deptId=2;</p>

<p>SELECT * FROM dept;
SELECT * FROM employee;</p>

<p>– 级联修改（修改）
– 直接修改部门
UPDATE dept SET id=5 WHERE id=4;</p>

<p>– 级联删除
– 直接删除部门 
DELETE FROM dept WHERE id=1;
```</p>

<p>###关联查询
```mysql
– 需求：查询员工及其所在部门(显示员工姓名，部门名称)
– 2.1 交叉连接查询（不推荐。产生笛卡尔乘积现象：4 * 4=16，有些是重复记录）
SELECT empName,deptName FROM employee,dept;</p>

<p>– 需求：查询员工及其所在部门(显示员工姓名，部门名称)
– 多表查询规则：1）确定查询哪些表   2）确定哪些哪些字段   3）表与表之间连接条件 (规律：连接条件数量是表数量-1)
– 2.2 内连接查询：只有满足条件的结果才会显示(使用最频繁)
SELECT empName,deptName       – 2）确定哪些哪些字段
	FROM employee,dept    – 1）确定查询哪些表
	WHERE employee.deptId=dept.id  – 3）表与表之间连接条件</p>

<p>– 内连接的另一种语法
SELECT empName,deptName
	FROM employee
	INNER JOIN dept
	ON employee.deptId=dept.id;</p>

<p>– 使用别名
SELECT e.empName,d.deptName
	FROM employee e
	INNER JOIN dept d
	ON e.deptId=d.id;</p>

<p>– 需求： 查询每个部门的员工
– 预期结果：
 –  软件开发部  张三
 –  软件开发部  李四
 –  应用维护部  王五
 –  秘书部      陈六
 –  总经办      null 
– 2.2 左[外]连接查询： 使用左边表的数据去匹配右边表的数据，如果符合连接条件的结果则显示，如果不符合连接条件则显示null
 – （注意： 左外连接：左表的数据一定会完成显示！）
SELECT d.deptName,e.empName
	FROM dept d
	LEFT OUTER JOIN employee e
	ON d.id=e.deptId;</p>

<p>– 2.3 右[外]连接查询: 使用右边表的数据去匹配左边表的数据，如果符合连接条件的结果则显示，如果不符合连接条件则显示null
 – （注意： 右外连接：右表的数据一定会完成显示！）
SELECT d.deptName,e.empName
	FROM employee e
	RIGHT OUTER JOIN dept d
	ON d.id=e.deptId;</p>

<p>– 2.4 自连接查询
– 需求：查询员工及其上司
– 预期结果：     <br />
	– 张三    null
	– 李四    张三
	– 王五    李四
	– 陈六    王五
SELECT e.empName,b.empName
	FROM employee e 
	LEFT OUTER JOIN employee b
	ON e.bossId=b.id;</p>

<p>SELECT * FROM employee;
SELECT * FROM dept;
– 添加上司ID
ALTER TABLE employee ADD bossId INT;
UPDATE employee SET bossId=1 WHERE id=2;
UPDATE employee SET bossId=2 WHERE id=3;
UPDATE employee SET bossId=3 WHERE id=4;
```
####时间日期相关函数
<img src="http://7xqmjb.com1.z0.glb.clouddn.com/2016123015394屏幕快照 2016-12-30 下午3.32.38.png" alt="2016123015394屏幕快照 2016-12-30 下午3.32.38.png" /></p>

<p>####字符串相关函数
<img src="http://7xqmjb.com1.z0.glb.clouddn.com/2016123052459屏幕快照 2016-12-30 下午3.34.11.png" alt="2016123052459屏幕快照 2016-12-30 下午3.34.11.png" />
####数学相关函数
<img src="http://7xqmjb.com1.z0.glb.clouddn.com/20161230116屏幕快照 2016-12-30 下午3.35.10.png" alt="20161230116屏幕快照 2016-12-30 下午3.35.10.png" /></p>

<p>###存储过程
```mysql
– 声明结束符
– 创建存储过程
DELIMITER $
CREATE PROCEDURE pro_test()
BEGIN
	– 可以写多个sql语句;
	SELECT * FROM employee;
END $</p>

<p>– 执行存储过程
CALL pro_test();</p>

<p>– 3.1 带有输入参数的存储过程
– 需求：传入一个员工的id，查询员工信息
DELIMITER $
CREATE PROCEDURE pro_findById(IN eid INT)  – IN: 输入参数
BEGIN
	SELECT * FROM employee WHERE id=eid;
END $</p>

<p>– 调用
CALL pro_findById(4);</p>

<p>– 3.2 带有输出参数的存储过程
DELIMITER $
CREATE PROCEDURE pro_testOut(OUT str VARCHAR(20))  – OUT：输出参数
BEGIN
        – 给参数赋值
	SET str=’helljava’;
END $</p>

<p>– 删除存储过程
DROP PROCEDURE pro_testOut;
– 调用
– 如何接受返回参数的值？？
– <strong><em>mysql的变量</em></strong>***
–  全局变量（内置变量）：mysql数据库内置的变量 （所有连接都起作用）
        – 查看所有全局变量： show variables
        – 查看某个全局变量： select @@变量名
        – 修改全局变量： set 变量名=新值
        – character_set_client: mysql服务器的接收数据的编码
        – character_set_results：mysql服务器输出数据的编码</p>

<p>–  会话变量： 只存在于当前客户端与数据库服务器端的一次连接当中。如果连接断开，那么会话变量全部丢失！
        – 定义会话变量: set @变量=值
        – 查看会话变量： select @变量</p>

<p>– 局部变量： 在存储过程中使用的变量就叫局部变量。只要存储过程执行完毕，局部变量就丢失！！</p>

<p>– 1)定义一个会话变量name, 2)使用name会话变量接收存储过程的返回值
CALL pro_testOut(@NAME);
– 查看变量值
SELECT @NAME;</p>

<p>– 3.3 带有输入输出参数的存储过程
DELIMITER $
CREATE PROCEDURE pro_testInOut(INOUT n INT)  – INOUT： 输入输出参数
BEGIN
   – 查看变量
   SELECT n;
   SET n =500;
END $</p>

<p>– 调用
SET @n=10;</p>

<p>CALL pro_testInOut(@n);</p>

<p>SELECT @n;</p>

<p>– 3.4 带有条件判断的存储过程
– 需求：输入一个整数，如果1，则返回“星期一”,如果2，返回“星期二”,如果3，返回“星期三”。其他数字，返回“错误输入”;
DELIMITER $
CREATE PROCEDURE pro_testIf(IN num INT,OUT str VARCHAR(20))
BEGIN
	IF num=1 THEN
		SET str=’星期一’;
	ELSEIF num=2 THEN
		SET str=’星期二’;
	ELSEIF num=3 THEN
		SET str=’星期三’;
	ELSE
		SET str=’输入错误’;
	END IF;
END $</p>

<p>CALL pro_testIf(4,@str);</p>

<p>SELECT @str;</p>

<p>– 3.5 带有循环功能的存储过程
– 需求： 输入一个整数，求和。例如，输入100，统计1-100的和
DELIMITER $
CREATE PROCEDURE pro_testWhile(IN num INT,OUT result INT)
BEGIN
	– 定义一个局部变量
	DECLARE i INT DEFAULT 1;
	DECLARE vsum INT DEFAULT 0;
	WHILE i&lt;=num DO
	      SET vsum = vsum+i;
	      SET i=i+1;
	END WHILE;
	SET result=vsum;
END $</p>

<p>DROP PROCEDURE pro_testWhile;</p>

<p>CALL pro_testWhile(100,@result);</p>

<p>SELECT @result;</p>

<p>USE day16;</p>

<p>– 3.6 使用查询的结果赋值给变量（INTO）
DELIMITER $
CREATE PROCEDURE pro_findById2(IN eid INT,OUT vname VARCHAR(20) )
BEGIN
	SELECT empName INTO vname FROM employee WHERE id=eid;
END $</p>

<p>CALL pro_findById2(1,@NAME);</p>

<p>SELECT @NAME;</p>

<p>USE day15;</p>

<p>SELECT * FROM student2;</p>

<p>– 练习： 编写一个存储过程 
	如果学生的英语平均分小于等于70分，则输出’一般’
	如果学生的英语平均分大于70分，且小于等于90分，则输出‘良好’
	如果学生的英语平均分大于90分，则输出‘优秀’</p>

<p>DELIMITER $
CREATE PROCEDURE pro_testAvg(OUT str VARCHAR(20))
BEGIN 
      – 定义局部变量，接收平均分
      DECLARE savg DOUBLE;
      – 计算英语平方分
      SELECT AVG(english) INTO savg FROM student2;
      IF savg&lt;=70 THEN
           SET str=’一般’;
      ELSEIF savg&gt;70 AND savg&lt;=90 THEN
           SET str=’良好’;
      ELSE
	   SET str=’优秀’;
      END IF;
END $</p>

<p>CALL pro_testAvg(@str);</p>

<p>SELECT @str;
<code class="highlighter-rouge">
###触发器
</code>mysql
SELECT * FROM employee;</p>

<p>– 日志表
CREATE TABLE test_log(
	id INT PRIMARY KEY AUTO_INCREMENT,
	content VARCHAR(100)
)</p>

<p>– 需求： 当向员工表插入一条记录时，希望mysql自动同时往日志表插入数据
– 创建触发器(添加)
CREATE TRIGGER tri_empAdd AFTER INSERT ON employee FOR EACH ROW    – 当往员工表插入一条记录时
     INSERT INTO test_log(content) VALUES(‘员工表插入了一条记录’);</p>

<p>– 插入数据
INSERT INTO employee(id,empName,deptId) VALUES(7,’扎古斯’,1);
INSERT INTO employee(id,empName,deptId) VALUES(8,’扎古斯2’,1);</p>

<p>– 创建触发器(修改)
CREATE TRIGGER tri_empUpd AFTER UPDATE ON employee FOR EACH ROW    – 当往员工表修改一条记录时
     INSERT INTO test_log(content) VALUES(‘员工表修改了一条记录’);</p>

<p>– 修改
 UPDATE employee SET empName=’eric’ WHERE id=7;</p>

<p>– 创建触发器(删除)
CREATE TRIGGER tri_empDel AFTER DELETE ON employee FOR EACH ROW    – 当往员工表删除一条记录时
     INSERT INTO test_log(content) VALUES(‘员工表删除了一条记录’);</p>

<p>– 删除
 DELETE FROM employee WHERE id=7;</p>

<p>SELECT * FROM employee;
 SELECT * FROM test_log;</p>

<p>– <strong>**</strong><strong>**<em>五、mysql权限问题</em></strong><strong>**</strong><strong>**</strong>*
 – mysql数据库权限问题：root ：拥有所有权限（可以干任何事情）
 – 权限账户，只拥有部分权限（CURD）例如，只能操作某个数据库的某张表
 – 如何修改mysql的用户密码？
 – password: md5加密函数(单向加密)
 SELECT PASSWORD(‘root’); – *81F5E21E35407D884A6CD4A731AEBFB6AF209E1B</p>

<p>–  mysql数据库，用户配置 : user表
USE mysql;</p>

<p>SELECT * FROM USER;</p>

<p>– 修改密码
UPDATE USER SET PASSWORD=PASSWORD(‘123456’) WHERE USER=’root’;</p>

<p>– 分配权限账户
GRANT SELECT ON day16.employee TO ‘eric’@’localhost’ IDENTIFIED BY ‘123456’;
GRANT DELETE ON day16.employee TO ‘eric’@’localhost’ IDENTIFIED BY ‘123456’;
```</p>


  </section>
</article>

<section class="read-more">
   
   
   <div class="read-more-item">
       <span class="read-more-item-dim">最近的文章</span>
       <h2 class="post-list__post-title post-title"><a href="/2017/01/JDBC%E7%9A%84%E7%94%A8%E6%B3%95/" title="link to Java中的JDBC">Java中的JDBC</a></h2>
       <p class="excerpt">JDBC###什么是JDBC使用java代码发送sql语句的技术，就是jdbc技术。###使用jdbc的前提- 需要登录数据库服务器- 需要知道数据库的IP地址- 需要知道数据库服务器的端口号- 需要知道数据库的用户名- 需要知道数据库密码###数据库连接1. 先确定连接数据库的URL，2. 然后使用Driver注册驱动，3. 注册驱动之后然后再去连接数据库具体实现代码如下：第一种连接方式：     //1.创建驱动程序类对象		Driver driver = new com.mysql....&hellip;</p>
       <div class="post-list__meta"><time datetime="2017-01-11 13:16:32 +0800" class="post-list__meta--date date">2017-01-11</time> &#8226; <span class="post-list__meta--tags tags">Blog</span><a class="btn-border-small" href=/2017/01/JDBC%E7%9A%84%E7%94%A8%E6%B3%95/>继续阅读</a></div>
   </div>
   
   
   
   
   <div class="read-more-item">
       <span class="read-more-item-dim">更早的文章</span>
       <h2 class="post-list__post-title post-title"><a href="/2017/01/JAVA%E4%B8%AD%E7%9A%84%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%A4%84%E7%90%86%E4%BB%A5%E5%8F%8A%E5%8C%85%E8%A3%85%E7%B1%BB/" title="link to JAVA中的字符串处理以及包装类">JAVA中的字符串处理以及包装类</a></h2>
       <p class="excerpt">JAVA中的字符串处理以及包装类### 字符串把两个字符串中相同的内容给截取出来/*     * 作业1：获取两个字符串的最大相同子串。 "asdfitcastghjfghjk" "xcitcastvbnm" 思路：     * 1，先明确两个字符串的长短，在长串中判断短串是否存在。 2，存在，已找到，说明短串就是最大的相同的。     * 不存在，就将短串按照长度递减的方式，获取短串中的子串并到长串中判断。 3，一旦存在，便结束查找。     */    public static St...&hellip;</p>
       <div class="post-list__meta"><time datetime="2017-01-11 12:16:32 +0800" class="post-list__meta--date date">2017-01-11</time> &#8226; <span class="post-list__meta--tags tags">Blog</span><a class="btn-border-small" href=/2017/01/JAVA%E4%B8%AD%E7%9A%84%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%A4%84%E7%90%86%E4%BB%A5%E5%8F%8A%E5%8C%85%E8%A3%85%E7%B1%BB/>继续阅读</a></div>
   </div>
   
</section>




                        <!-- 多说评论框 start -->
    <div class="ds-thread" data-thread-key=/2017/01/MySql一些语句 data-title=MySql一些语句data-url=your web site//2017/01/MySql%E4%B8%80%E4%BA%9B%E8%AF%AD%E5%8F%A5/></div>
<!-- 多说评论框 end -->
<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
<script type="text/javascript">
var duoshuoQuery = {short_name:"renyufei8023"};
    (function() {
        var ds = document.createElement('script');
        ds.type = 'text/javascript';ds.async = true;
        ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
        ds.charset = 'UTF-8';
        (document.getElementsByTagName('head')[0] 
         || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
    </script>
<!-- 多说公共JS代码 end -->
            <section class="footer">
    <footer>
      <br>
      <br>
    	<span class="footer__copyright">本站点采用<a href="http://creativecommons.org/licenses/by-nc-sa/4.0/">知识共享 署名-非商业性使用-相同方式共享 4.0 国际 许可协议</a></span>
        <span class="footer__copyright">由 <a href="https://jekyllrb.com">Jekyll</a> 于 2017-01-12 生成，感谢<a href="https://pages.github.com"> GitHub Pages</a> 强力驱动</span>
        <span class="footer__copyright">本站由 <a href="http://yufei.ren">@halfrost</a> 创建，采用 <a href="https://github.com/onevcat/vno-jekyll">Vno - Jekyll</a> 作为主题，您可以在 GitHub 找到<a href="https://github.com/onevcat/OneV-s-Den">本站源码</a> - &copy; 2017</span>
    </footer>
</section>

        </div>
    </div>
    
    <script type="text/javascript" src="//code.jquery.com/jquery-1.11.3.min.js"></script>

<script type="text/javascript" src="/js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>

<script type="text/javascript" src="/js/main.js"></script>



    

  </body>

</html>
